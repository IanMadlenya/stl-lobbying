{% extends '_base.html' %}

{% block body_class %}legislator-detail detail{% endblock body_class %}

{% block header_content %}
<div class="header-wrapper">
    <div class="project-header">
        <h1><a href="/">{{ PROJECT_NAME }}</a></h1>
    </div>
</div>
{% endblock %}


{% block content %}
<h1>{{ legislator.display_name() }}</h1>
<h2>{{ legislator.party|replace("Republican", "R")|replace("Democratic", "D") }} &ndash; {{ legislator.district }}</h2>
{% if legislator.phone %}<p>{{ legislator.phone }}</p>{% endif %}
{% if legislator.hometown %}<p>{{ legislator.hometown }}</p>{% endif %}
<p>Elected in {{ legislator.year_elected }}</p>

<p>Total received, all time: ${{ comma(total_spending) }}</p>
<p>Total gifts received: {{ comma(total_expenditures) }}</p>
<h3>Organizations giving the most to this legislator:</h3>
<ul>
    {% for org in top_organizations %}
    <li>{{ org.name }}: ${{ org.total_spending }}</li>
    {% endfor %}
</ul>
{% endblock %}


{% block wide_content %}
<div class="row">
    <div class="col-md-12">
        <table class="table table-striped gift-table">
            <thead>
                <tr>
                    <th class="date">Date</th>
                    <th class="recipient">Organization</th>
                    <th class="expenditure">Expenditure</th>
                    <th class="description">Description</th>
                    <th class="category">Category</th>
                </tr>
            </thead>
            <tbody>
            {% for ex in legislator.expenditures %}
                <tr>
                    <td class="date">{{ ex.event_date.strftime('%B %e, %Y') }}</td>
                    <td class="recipient">{% if ex.organization %}<a href="{{ ex.organization.url() }}">{{ ex.organization.name }}</a>{% endif %}</td>
                    <td class="expenditure">${{ comma(ex.cost) }}</td>
                    <td class="description">{{ ex.description }}</td>
                    <td class="category">{{ ex.category }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
